---
layout: post
title: 子网划分
category: 网络
tag:
---

### IP地址分类

为了便于寻址和层次化构造网络，每个IP地址由两部分组成：网络号和主机号。同一个区域的所有主机拥有相同的网络号（IP地址的前半部分），区域内每个主机（含路由器）都有不同的主机号。

IPv4地址被分为A,B,C,D,E五类，用32位二进制数字表示时，A,B,C类地址的网络号长度分为别8位,16位,24位。

![]({{"/pic/ipclass.png" | prepend: site.baseurl}})

### 子网划分

IP地址如果只用ABCDE来划分，会造成大量的浪费，可在ABC类网络的基础上，进一步划分子网：即用主机号的前几个位来表示子网号，这样IP地址就可看成是：网络号+子网号+主机号。

子网号的位数没有硬性规定，一般用子网掩码来确定一个IP地址中哪几位是主机号。

举个例子，现有C类网202.203.204.0，要求把它平均分成4个子网，计算每个子网的起始、终止IP地址和子网掩码。

分析：由于2^2=4，因此子网号用两位来表示就够了。另外，一般主机号全0表示网络号本身，全1表示网络广播地址，不能用作主机的IP地址，需要去除。

```
        11001010 11001011 11001100 00000000 => 202.203.204.0
--------------------------------------------------------------
start1  11001010 11001011 11001100 00000001 => 202.203.204.1
  end1  11001010 11001011 11001100 00111110 => 202.203.204.62
--------------------------------------------------------------
start2  11001010 11001011 11001100 01000001 => 202.203.204.65
  end2  11001010 11001011 11001100 01111110 => 202.203.204.126
--------------------------------------------------------------
start3  11001010 11001011 11001100 10000001 => 202.203.204.129
  end3  11001010 11001011 11001100 10111110 => 202.203.204.190
--------------------------------------------------------------
start4  11001010 11001011 11001100 11000001 => 202.203.204.193
  end4  11001010 11001011 11001100 11111110 => 202.203.204.254
--------------------------------------------------------------
  mask  11111111 11111111 11111111 11000000 => 255.255.255.192
```

